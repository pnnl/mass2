2011-01-18  William A. Perkins  <william.perkins@pnl.gov>

	* Makefile.mpi: try to make various directories set by host name 

	* globals.f90 (globals): Intel Fortran does not like an empty
	CONTAINS 

	* mass2_parallel.f90 (mass2_parallel): call ma_init() 

	* test/wave/falconer/mass2_v027.case3.cfg: update configuration
	language

	* test/wave/falconer/mass2_v027.case2.cfg: update configuration
	language

	* test/wave/falconer/mass2_v027.case1.cfg: update configuration
	language 

	* test/wave/falconer/Makefile: mass2_v027.cfg -> mass2.cfg

	* test/flow/spur-dike-1/Makefile: mass2_v027.cfg -> mass2.cfg

	* Makefile.mpi (FCFLAGS): group flags better

	* block_hydro_bc.f90 (apply_hydro_bc): update of star/old values
	in wrong place

	* block_initialization.f90 (initialize_coeff): array to fill was
	chosen too soon

	* gage_output_module.f90 (gage_output): remove all netcdf variables
	(gage_print_text): better timestamp and elapsed time formatting

	* mass2_config.f90 (read_config): set second digits based on
	output time step(s)

2011-01-17  William A. Perkins  <william.perkins@pnl.gov>

	* Makefile.mpi: add gage output

	* mass2_parallel.f90 (mass2_parallel, output_init, output): turn
	on gage output

	* gage_output_module.f90: drop netcdf code; make work in parallel

	* block_var.f90 (block_var_get_all): block_var_all -> block_var_get_all

	* block_parallel.f90 (block_collect): block_var_all -> block_var_get_all

	* block_grid.f90 (block_gridplot): block_var_all -> block_var_get_all

2011-01-14  William A. Perkins  <william.perkins@pnl.gov>

	* plot_cgns.f90 (plot_cgns_write): output isdead%p

	* mass2_parallel.f90 (output): distribute isdead%p for output

	* block_parallel.f90 (block_module): add parallel variable for
	isdead%p; remove unused mass source global array

	* block_hydro_bc.f90 (block_compute_bc_flux): fix indexing bug
	(apply_hydro_bc): make DEAD, WALL, and FLUX conditions parallel

	* hydro_solve.f90 (hydro): pre-compute flow areas for "FLUX" bc's
	(collectively)

	* hydro_bc.f90 (read_bcspecs): allocate space for flow area when
	bc kind is "FLUX"

	* block_hydro_bc.f90 (block_compute_bc_flux): pre-compute flow
	areas for "FLUX" bc's

2011-01-13  William A. Perkins  <william.perkins@pnl.gov>

	* solver_petsc.F90 (solver_initialize): read options from a file

	* hydro_solve.f90 (hydro): distribute velocity and depth after
	*all* boundary conditions have been processed

	* block_initialization.f90 (initialize): old depth needs to be
	gotten after it's put; remote values are needed locally

	* block_hydro_bc.f90 (apply_hydro_bc): don't distribute adjusted
	velocity and depth here; wait until all bc's are processed

	* block_hydro.f90 (block_mass_source_sum): comment out debug message

	* block_grid.f90 (block_metrics): some of the metrics were not
	distributed

2010-12-17  William A. Perkins  <william.perkins@pnl.gov>

	* configure.in: need to call AC_PROG_FC() before AC_PROG_F90()

	* table_bc_module.f90 (table_boundary_conditions): increase
	maximum number of table columns

2010-04-07  William A. Perkins  <william.perkins@pnl.gov>

	* plot_netcdf.f90 (plot_file_setup_netcdf, plot_print_netcdf): add
	new block variables uflux and vflux to output

	* plot_cgns.f90 (plot_cgns_write): write uflux and vflux

	* global_module_023.f90 (globals, allocate_block_components): add
	new block variables uflux and vflux
	(velocity_shift): compute p-cell velocities using fluxes instead
	of averaging; compute new block variables uflux and vflux

	* accumulator.f90 (accumulator, accum_initialize, accum_reset) 
	(accumulate, accum_calc): add new accumulated variables uflux and
	vflux 

2010-04-02  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_hydro): incorrect indexes used for
	flux calculations in fine block

	* Makefile.am (scalars_source.o): now depends on
	misc_vars_module.o 

	* scalars_source.f90 (scalar_source_read): make it an error to
	choose a momentum differencing scheme that takes more ghost cells
	than are available

	* mass2_main_025.f90 (read_config): make it an error to choose a
	momentum differencing scheme that takes more ghost cells than are
	available 

	* mass2.f90 (mass2): close block flux output if used

	* mass2_main_025.f90 (output_init,output): optionally output block
	flux 
	(extrap_1_corner): extrapolate z too

2010-04-01  William A. Perkins  <william.perkins@pnl.gov>

	* block_flux_output.f90 (block_flux_print): write block edge areas
	too 

2010-03-26  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/normal-sine: channel test with sinusoidal cross
	section 

	* mass2_main_025.f90 (output_init, output): output block flux
	report 

	* mass2.f90 (mass2): close block flux report

	* Makefile.am: incorporate block_flux_output module

	* block_flux_output.f90: added

2010-02-02  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (start_up): allocate inlet_area and
	table_input with the maximum block dimension, not the maximum j
	dimension. 

2010-01-27  William A. Perkins  <william.perkins@pnl.gov>

	* block_bc_module.f90 (set_bc_part): fixed wrong file name in
	error messages 

2009-07-17  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/spur-dike-1/streamlines-metric.lay: draw the x-velocity
	separation line

	* test/flow/another-jump/mass2_v027.cfg: update configuration file
	format; switch to MSOU scheme

2009-05-28  William A. Perkins  <william.perkins@pnl.gov>

	* gage_output_module.f90 (gage_file_header, gage_print_text): use
	space instead of comma for delimiter so gnuplotting is the same as
	BC files

2009-05-27  William A. Perkins  <william.perkins@pnl.gov>

	* gage_output_module.f90 (gage_file_header): added
	(gage_print_text): revive text gage output and make default

	* test/benchmark/mcn-test/hotstart.bin: updated

	* test/benchmark/mcn-test/mass2_v027.base: update for momentum
	underrelaxation and discretization method

	* test/benchmark/mcn-test/mass2_v027.warmup: update for momentum
	underrelaxation and discretization method

	* test/benchmark/mcn-test/scalar_bcspecs.dat: block connections
	not needed

2009-01-27  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/mass2_v027.run, mass2_v027.warmup: update
	eddy viscosity input

	* plot_cgns.f90 (plot_cgns): make the CGNS output 2D and transient
	(visit now understands it, but not tecplot)

2009-01-23  William A. Perkins  <william.perkins@pnl.gov>

	* hydro_solve.f90 (calc_eddy_viscosity): under relax computed eddy
	viscosity 

	* mass2_main_025.f90 (initialize): bedshear and eddy viscosity
	need to be computed for *all* blocks
	(read_config): read and check eddy viscosity under relaxation

2009-01-22  William A. Perkins  <william.perkins@pnl.gov>

	* hydro_solve.f90 (calc_eddy_viscosity): under relax computed eddy
	viscosity 

	* plot_netcdf.f90 (plot_file_setup_netcdf, plot_print_netcdf): add
	eddy viscosity output

	* plot_cgns.f90 (plot_cgns_write): correct eddy viscosity units

	* global_module_023.f90 (allocate_block_components): add space for
	previous eddy viscosity value

	* mass2_main_025.f90 (read_config): add flag for eddy viscosity
	calculation 

	* misc_vars_module.f90 (misc_vars): add eddy viscosity
	underrelaxation factor

2009-01-22  William Perkins  <d3g096@turbulent.pnl.gov>

	* hydro_solve.f90 (uvel_solve): some of the grid metric
	coefficients were not being computed! 

2009-01-06  William A. Perkins  <william.perkins@pnl.gov>

	* accumulator.f90 (accumulator): accumulate eddy viscosity too 

	* global_module_023.f90 (globals): add vonkarmon and
	viscosity_water; get rid of some unused variables

	* hydro_solve.f90 (harmonic, bedshear): added
	(uvel_solve, vvel_solve): use harmonic means to compute face eddy
	viscosity  

	* mass2_main_025.f90 (start_up, buildghost, extrapghost)
	(interp_grid, fillghost_scalar, hydro, apply_hydro_bc)
	(extrapolate_udepth, extrapolate_vdepth, transport, etc):  get
	rid of unused variables
	(default_hydro_bc): copy eddy viscosity into ghost cells by
	default 
	(hydro): calculate eddy viscosity in the hydro iteration loop
	(fillghost_hydro): need to copy eddy viscosity into ghost cells
	too 
	(initialize): calculate eddy viscosity

	* misc_vars_module.f90 (misc_vars): add do_calc_eddy flag

	* plot_cgns.f90 (plot_cgns_write): use standard CGNS variable
	names and eddy viscosity
	(plot_cgns_file_close, plot_cgns_close): get rid of unused
	variables 

	* scalar_solve.f90 (bedshear): move to hydro_solve.f90

2008-11-06  William A. Perkins  <william.perkins@pnl.gov>

	* differencing.f90 (differencing): diff_method strings need to be
	all the same length for some (stupid) compilers

	* test/benchmark/jda/Makefile: hotstart.bin depends on $(MODEL)

	* mass2_main_025.f90 (initialize): initialize old old variable values too
	(read_hotstart): read old old variable values
	(write_restart): write old old variable values

	* transport_only_module.f90 (read_restart): read old old variable
	values 

2008-11-05  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/mass2_v027.run: use MSOU

	* test/flow/Rodi/mass2_v027.base: turn off 2nd order time
	differencing so SOU spatial differencing works

	* test/flow/spur-dike-1/mass2_v027.base: turn off 2nd order time
	differencing so SOU spatial differencing works

	* test/transport/1d-advection-1blk/Makefile: add MSOU and MUSCL schemes

	* test/transport/1d-analytic-2blk/Makefile: add MSOU and MUSCL schemes

	* test/transport/skew30-blk: run for multiple differencing schemes

	* test/transport/1d-analytic-2blk-side: run for multiple differencing schemes

	* test/transport/1d-advection-1blk/Makefile: add MSOU and MUSCL schemes

	* test/transport/skew30/Makefile: add MSOU and MUSCL schemes

	* test/transport/skew45-blk: run for multiple differencing schemes

	* test/transport/skew45/Makefile: add MSOU and MUSCL schemes

	* scalar_solve.f90 (scalar_solve): call differ2() instead of
	differ()
	(default_scalar_bc): fill all ghost cells with something
	reasonable

	* mass2_main_025.f90 (default_hydro_bc): fill all ghost cells with
	something reasonable

	* hydro_solve.f90 (vvel_solve, uvel_solve): call differ2() instead
	of differ()

	* differencing.f90 (msou_limiter, muscl_limiter, differ2): new
	routines to implement flux limited methods
	(differencing): add MSOU and MUSCL methods

	* test/transport/1d-analytic-1blk/Makefile: add MSOU and MUSCL differencing
	schemes

	* test/flow/Rodi/Makefile: add MSOU and MUSCL differencing
	schemes

	* test/flow/spur-dike-1/Makefile: add MSOU and MUSCL differencing
	schemes 

2008-11-03  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/skew30: run for multiple differencing schemes

2008-10-31  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/skew45: run for multiple differencing schemes

	* test/flow/spur-dike-1: run for multiple differencing schemes

	* test/flow/Rodi/Makefile: add SOU differencing case

	* test/benchmark/jda/mass2_v027.run: use full SOU instead of CDS
	for u/v momentum (which actually runs)

	* differencing.f90 (differencing): add second order upwinding (SOU)

	* hydro_solve.f90 (uvel_solve, vvel_solve): use coefficients 2
	cells away, except at some boundaries

	* mass2_main_025.f90 (read_config): correct checking of u/v
	momentum differencing method

	* scalar_solve.f90 (scalar_solve): use coefficients 2 cells away,
	except at some boundaries

2008-10-29  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_hydro): update for multiple ghost
	cell layers

	* test/flow/Rodi/Makefile: correct metric plots dependencies

	* test/transport/Makefile: add 1d-advection-*-side cases

	* test/transport/1d-advection-1blk/Makefile: improve make clean

	* test/transport/1d-analytic-2blk/Makefile: improve make clean

	* test/transport/1d-analytic-3blk-side/mass2_v027.base: update
	with u/v differencing scheme and time blending

	* test/transport/1d-analytic-2blk-side/mass2_v027.base: update
	with u/v differencing scheme and time blending

	* test/transport/1d-analytic-3blk/Makefile: correct editing of
	configuration file

	* test/transport/1d-analytic-2blk-side/scalar_source.dat: use full CDS

	* test/transport/1d-analytic-3blk-side/scalar_source.dat: use full CDS

	* test/transport/1d-analytic-3blk/scalar_source.dat: use full CDS

	* mass2_main_025.f90 (fillghost_scalar): fix small problem with
	scalar cell type

2008-10-28  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_scalar): make work with two layers
	of ghost cells
	(fillghost): really make work with two layers of ghost cells

2008-10-27  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/Makefile: rework to have a warmup simulation

	* mass2_main_025.f90 (buildghost, extrapghost): make work with two
	layers of ghost cells
	(extrapghostcorners, extrap_1_corner): add helper routines to
	build ghost cells at block corners
	(interp_grid): mesh corner extrapolation is no longer handled here

	* misc_vars_module.f90 (misc_vars): increase the number of ghost
	cells to 2

2008-10-24  William A. Perkins  <william.perkins@pnl.gov>

	* global_module_023.f90 (metrics): initialize hu1 and hu2 to some
	bogus values (for corner ghost cells)

2008-10-22  William A. Perkins  <william.perkins@pnl.gov>

	* hydro_solve.f90 (uvel_solve, vvel_solve): use differ()

	* Makefile.am: hydro_solve.o depends on differencing.o

	* scalar_solve.f90 (scalar_solve): caller specifies differencing
	scheme; use differ(); 2nd order coefficients don't need to be in
	arrays 

	* scalars_module.f90 (allocate_scalarblock_components): make sure
	all values get initialized

	* differencing.f90 (differ): combine differ_en and differ_ws and
	add higher order coefficients

2008-10-21  William A. Perkins  <william.perkins@pnl.gov>

	* scalars_source.f90 (scalars_source): add scheme to scalar_source_rec
	(scalar_source_read): read differencing scheme

	* misc_vars_module.f90 (misc_vars): move blend_uv to differencing
	module 

	* mass2_main_025.f90 (read_config): read u/v-momentum differencing
	method from the configuration file

	* differencing.f90 (differencing): add differencing method
	keywords and routines to handle them

2008-10-17  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/dead-2-blk/Makefile: correct MODEL name

	* test/flow/dead-2/Makefile: correct MODEL name

2008-10-16  William A. Perkins  <william.perkins@pnl.gov>

	* test/wave/conical/Makefile: correct MODEL name

	* test/transport/1d-analytic-2blk/Makefile: correct MODEL name

	* test/transport/1d-analytic-2blk/scalar_source.dat: use some
	under-relaxation

	* test/transport/1d-analytic-2blk/scalar_bcspecs.dat: remove old
	block connection lines

	* test/flow/spur-dike-1/streamlines.lay: show line for separation

	* test/flow/Rodi/streamlines.lay: show line for separation

	* gage_output_module.f90 (mass_file_setup, mass_print): flush the
	mass source output after every write

	* hydro_solve.f90 (uvel_solve, vvel_solve, depth_solve): do
	blended 3-level time differencing

	* mass2_main_025.f90 (read_config): read blend_time

	* misc_vars_module.f90 (misc_vars): add blend_time factor

	* scalar_solve.f90 (scalar_solve): do blended 3-level time
	differencing 

2008-10-10  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/Makefile: add net cases

	* hydro_solve.f90 (uvel_solve, vvel_solve): enable 2nd order
	differencing and implicit underrelaxation

	* mass2_main_025.f90 (read_config): add u/v relaxation and
	blending factors; do some error checking

	* scalar_solve.f90 (scalar_solve): enable 2nd order differencing
	and implicit underrelaxation

	* scalars_source.f90 (scalars_source_rec): add underrelaxation and
	blending factor
	(scalar_source_read): read underrelaxation and blending factor

	* misc_vars_module.f90 (misc_vars): add u/v momentum
	underrelaxation and blend variables

	* Makefile.am (mass2_SOURCES): add differencing.f90

	* differencing.f90: added

	* plot_cgns.f90 (plot_cgns_file_setup): use correct physical dimensions

2008-02-28  William A. Perkins  <william.perkins@pnl.gov>

	* plot_cgns.f90 (plot_cgns_write): make sure linkage to mesh
	coordinates is there

2005-09-07  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (output): Compute bed shear for output if not
	computed for transport

2004-10-22  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/mixing/mass2_v027.base: make lateral and
	longitudinal diffusivity the same

2004-09-08  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_hydro): adjustments for dry cells,
	fixed some interpolation problems

	* global_module_023.f90 (wsinterp): DO NOT used dry cells to
	determine w.s. elevation

	* mass2_main_025.f90 (hydro): set isdry for side ghost cells too

	* gage_output_module.f90 (gage_read_control): Check to make sure
	block indexes read are reasonable

2004-04-14  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_parallel.f90 (mass2_parallel): call fptrap_common() and
	make sure current_time is set
	(hydro_parallel): do not manually set "zero gradient" conditions 
	(transport_parallel): call default_scalar_bc()

	* mass2.f90 (mass2): call fptrap_common()

	* global_parallel.f90: type and bctype to xtype and xbctype and
	ytype and ybctype

2004-04-07  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_hydro): fix problems with
	one-to-many block connections
	(hydro): compute wsel here to make sure it's computed

	* global_module_023.f90 (wsinterp): replace dinterp with wsinterp 

2004-04-05  William A. Perkins  <william.perkins@pnl.gov>

	* block_bc_module.f90 (read_bcspecs): do not use  out of range
	block numbers

2004-04-02  William A. Perkins  <william.perkins@pnl.gov>

	* README: note changes to f90 compiler options

	* block_bc_module.f90 (read_bcspecs): catch out of range block
	numbers properly

	* mass2.f90 (mass2): initialize current_time here, not in
	read_config 

	* mass2_main_025.f90 (read_config): don't call CLOSE twice, make
	sure ydigits argument of date_time_flags points to an actual
	location  

2004-03-25  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_scalar, transport,
	apply_scalar_bc, apply_scalar_source):  transport BC's on block
	sides 
	(apply_hydro_bc, apply_scalar_bc): error message for bad/unknown
	BC's 
	(fillghost_scalar): make sure cell type is set

	* scalar_solve.f90 (scalar_solve): account for BC's on block
	side. 
	(default_scalar_bc): added

	* block_bc_module.f90 (read_scalar_bcspecs): allow 'RB' and 'LB'
	conditions 

2004-03-17  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/normal-3blk-side: new test

	* test/flow/dead-1-blk-nest-side: new test

	* mass2_main_025.f90 (extrapghost): The corners are now handled in
	interp_grid so block connections can be considered.
	(buildghost, fillghost_hydro): allow block connections on (LB, RB)
	side. 

	* global_module_023.f90 (varea, vflux): add

2004-01-30  William A. Perkins  <william.perkins@pnl.gov>

	* scripts/mass2slice.pl: add -D option to eliminate output from
	dry cells

	* mass2_main_025.f90 (start_up): profile_init needs to be called
	*after* metrics

2004-01-28  William A. Perkins  <william.perkins@pnl.gov>

	* profile_init.f90 (profile_init): rearranged the code and added
	the ability to initialize the velocity as well as stage.  

2004-01-27  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/another-jump: Added hydraulic jump case using ELEVELO
	boundary condition.

2004-01-26  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (apply_hydro_bc): use the ELEVELO boundary
	condition type to set FLOWBC_BOTH conditions
	(start_up): do not write ghost cells to gridplot1.dat anymore
	(hydro): when velocities are dead (walls) use a slip condition not
	a non-slip condition to be consistent with block sides

	* block_bc_module.f90 (read_bcspecs): Allow the keyword ELEVELO in
	bcspecs.dat.

	* global_module_023.f90: added FLOWBC_BOTH hydrodynamic boundary
	condition where both stage and velocity are specified in the same
	file. 

2003-12-31  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (apply_hydro_bc): handle ZEROG hydro BC type 

	* global_module_023.f90 (globals): add ZEROG hydro BC type

	* block_bc_module.f90 (read_bcspecs): add ZEROG BC type

	* test/flow/normal-1blk/mass2_v027.base: make starting conditions
	the same as other normal flow cases

2003-11-21  William A. Perkins  <william.perkins@pnl.gov>

	* gage_output_module.f90 (mass_print): more resolution in output.

2003-11-14  William A. Perkins  <william.perkins@pnl.gov>

	* util/cart_grid/cartgrid.f90: Increase resolution of output
	format  

	* mass2_main_025.f90 (hydro): Make walls a non-slip internal
	boundary. 

2003-10-24  William A. Perkins  <william.perkins@pnl.gov>

	* util/cart_grid/cartgrid.f90: needed more significant figures in
	output 

2003-10-14  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/mixing-transport-only/Makefile (clean): do not
	remove gage_control.dat

2003-09-18  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (fillghost_hydro): incorrect indexing of
	1-to-many connection fixed.
	(fillghost_scalar): ditto

2003-09-03  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_parallel.f90 (transport_parallel): transfer only parts of
	scalar solution

	* global_parallel.f90 (mpi_init_mass2): do not define special
	types for structures, transfer them as arrays

2003-08-19  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (apply_scalar_source): added
	(transport): compute source term in advance (for parallelization) 

2003-07-29  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (start_up): call read_grid and read grid
	points *before* calling read_bcspecs

2003-07-17  William A. Perkins  <william.perkins@pnl.gov>

	* block_bc_module.f90: more diagnostics on block connection errors

	* scalar_mass_balance.f90: when only computing mass, delta is
	zero, do not divide by zero

	* sediment_source.f90 (sediment_parse_options): erosion and
	deposition were allocated with the wrong lower bound indices

	* particulate_source.f90 (part_parse_options): bedexch was
	allocated with the wrong lower bound indices.

2003-06-09  William A. Perkins  <william.perkins@pnl.gov>

	* solver_sixpack.f90: add equation option to solver(), but it is
	not used

2003-06-06  William A. Perkins  <william.perkins@pnl.gov>

	* solver_aztec.f90: USE solver_common, add equation option to
	solver() 

	* solver_tdma.f90: USE solver_common, add equation option to
	solver() 

	* solver_common.f90: created

2003-06-05  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90 (check_wetdry): rely on ghost cell
	information (if available) for rewetting; need for
	wselev_block_neighbor and active_cell eliminated

	* configure.in (--with-aztec): Fix so that all necessary libraries
	are included when the Aztec solver is used.

	* Makefile.am (solver_test_SOURCES): solver_backup.f90 needed
	here. 

2003-05-20  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/gage_control.dat: add some gages to compare

	* mass2_main_025.f90: reference to global 'iblock' removed in
	fillghost_hydro 

2003-05-20  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/gage_control.dat: add some gages to compare

	* mass2_main_025.f90: reference to global 'iblock' removed in
	fillghost_hydro 

2003-05-16  William A. Perkins  <william.perkins@pnl.gov>

	* misc_vars_module.f90: filenames too short for SAC runs

	* transport_only_module.f90: filenames too short for SAC runs

	* test: change all of the configuration files because of
	bed_iterations (there has got to be a better way)

	* mass2_main_025.f90: read bed_iterations from the config file on
	the bed line

	* bed.f90: use bed source flow to advect pore contaminant into the
	water column; iterate the computation of bed pore/water column
	interaction 

	* scalars_source.f90: interpolate bed source flow if it has been
	specified 

	* bed_source.f90: add global variables to hold bed source flow
	data 

	* generic_source.f90: add BEDFLOW keyword

2003-05-15  William A. Perkins  <william.perkins@pnl.gov>

	* test/sediment/Makefile: included beddecay

	* test/sediment/beddecay: Updated test case with Makefile

	* scalars_source.f90: use explicitly calculated bed pore exchange

	* generic_source.f90: bed pore exchange is now handled completely
	in the bed module

	* bed.f90: diffusive flux between bed and water column is now
	handled explicitly 

	* bed_functions.inc (bed_pore_flux): added definition

	* bed_functions.f90 (bed_pore_flux): added

	* Makefile.am (accumulator.o): depends on bed.o

2003-05-14  William A. Perkins  <william.perkins@pnl.gov>

	* bed_source.f90: use time_series to store time series data

2003-05-08  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/dead-2-blk-nest: added nested version of dead-2-blk

	* test/flow/dead-2-blk: brought over from main branch

	* mass2_main_025.f90: modified ghost cell construction;
	fillghost_hydro routine to fill ghost cells with neighboring block
	hydro information

	* global_module_023.f90: several routines to help with grid
	nesting: uflux, uarea, dinterp

	* distance.f90 (interpolate_point): routine to interpolate a point
	part way between two points

2003-05-07  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/normal-2blk/mass2_v027.cfg: dump all time planes to
	plot output

	* test/flow/normal-2blk/plot-depth.gp: plot last time plane
	instead of second

	* test/flow/normal-2blk/plot-vel.gp: plot last time plane instead
	of second

	* test/flow/normal-2blk/plot-elev.gp: plot last time plane instead
	of second

2003-05-06  William A. Perkins  <william.perkins@pnl.gov>

	* distance.f90: created

	* profile_init.f90: moved distance function to its own file

	* block_bc_module.f90: Only the block connections in bcspecs.dat
	are considered; those in scalar_bcspecs.dat are ignored.  Scalar
	block connections are generated from the hydro block connections.
	Some additional checking of hydro block connections was added to
	make sure the condition specified for one block match that of
	another. 

	* Makefile.am: block_bc_module.o now depends on
	global_module_023.o; distance.f90 added to sources

2003-05-05  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/wall-1-blk/bcspecs.dat: A block to block BC must be
	specified on one line.

2003-04-28  William A. Perkins  <william.perkins@pnl.gov>

	* configure.in: add --with-extra-fflags to supply extra flags to
	the compiler

2003-04-25  William A. Perkins  <william.perkins@pnl.gov>

	* scalars_module.f90 (allocate_scalar): do not initialize conc
	here (how did this work?); also, use error/status_message instead
	of units.

2003-04-24  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90: set the number of year digits based on the
	year of the end simulation time

2003-04-23  William A. Perkins  <william.perkins@pnl.gov>

	* scalars_module.f90: include some places to store mass balance
	information in scalar record

	* mass2_main_025.f90: use scalar_mass_balance.f90

	* Makefile.am: added scalar_mass_balance.f90

	* generic_source.f90: missing index increment when parsing DIFFUS 

	* mass2.f90: get rid of call to fpinit it was mistakenly left in
	during the port to the PC.

	* scalar_mass_balance.f90: created

	* test/transport/1d-analytic-1blk/scalar_source.dat: change
	simulated temperature to generic stuff

	* test/transport/1d-analytic-1blk/plot.gp: change
	simulated temperature to generic stuff

	* test/transport/1d-advection-1blk/mass2_v027.base: let it run to
	steady state

	* test/transport/1d-advection-1blk/plot.gp: change
	simulated temperature to generic stuff

	* test/transport/1d-advection-1blk/scalar_source.dat: change
	simulated temperature to generic stuff

2003-04-17  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/Makefile: do not remove gage_control.dat

	* global_module_023.f90: initialize several block variables that
	were giving the DEC/Alpha compiler fits

	* configure.in: correct name of CGNS library for Alpha OSF

	* accumulator.f90: Initialize the accumulated variables

	* Makefile.am: add a target from makefile.linux to make mass2.ps
	using a2ps

	* mass2_main_025.f90 (buildghost): go back to extrapolating the
	bottom elevation in ghost cells (instead of level)
	(compute_uflow_area): use the depth at the boundary, not the depth
	in the ghost cell

2003-04-16  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90: adjust for changes to routines in
	block_bc_module.f90 

	* block_bc_module.f90: check the language of the bcspecs.dat and
	scalar_bcspecs.dat files when read; eliminate the use of
	error_iounit and status_iounit

2003-04-15  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/jda/bcspecs.dat: use a DEAD zone

	* test/benchmark/mcn-test/BCFiles/MCN_FBZ.prn: Had the wrong
	period; found when time series code was replaced. Previous
	simulation results from this case cannot be trusted.

2003-04-08  William A. Perkins  <william.perkins@pnl.gov>

	* mass2.f90: close the error and status output files AFTER
	everything else

	* bed_source.f90: do not use table_entry_struct any more

	* table_bc_module.f90: use time_series 

	* test/benchmark/mcn-test/results.txt (file): timed some tests
	with CGNS on/off

2003-04-04  William A. Perkins  <william.perkins@pnl.gov>

	* transport_only_module.f90: CALL open_existing instead of
	directly OPENing file; CALL error_message and status_message

	* tdg_source.f90 (tdg_read_param): CALL open_existing instead of
	directly OPENing file; CALL status_message instead of WRITEing

	* bed.f90: CALL open_existing instead of directly OPENing
	files; CALL error_message and status_message instead of WRITEing 

	* bed_source.f90: CALL open_existing instead of directly OPENing
	files; CALL error_message and status_message instead of WRITEing

	* profile_init.f90 (profile_init): CALL open_existing instead of
	directly OPENing a the file

	* plot_cgns.f90: CALL error_message instead of writing to
	error_iounit. 

	* util/cart_grid/Makefile.am (clean-local): added local clean
	target and additional EXTRA_DIST files

2003-04-03  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90: Put a bunch of plot output flags it the
	configuration file

	* plot_cgns.f90: multiple files are now output: one for the grid
	alone and several more containing a specified number of time
	slices 

2003-04-01  William A. Perkins  <william.perkins@pnl.gov>

	* util/Makefile.am: created

	* util/cart_grid/Makefile.am: created

	* configure.in: include util in build

2003-03-31  William A. Perkins  <william.perkins@pnl.gov>

	* scalars_source.f90: use open_existing

	* met_data_module.f90: use time series module to read and
	interpolate weather data

	* mass2.f90: initialize and shutdown time series module

2003-03-27  William A. Perkins  <william.perkins@pnl.gov>

	* plot_netcdf.f90 (plot_print_netcdf): timestamp should be made by
	concatenation 

2003-03-26  William A. Perkins  <william.perkins@pnl.gov>

	* makefile.sgi: was makefile

	* date_time_module.f90: moved to time_series

	* julian.f90: moved to time_series

	* configure.in: added

	* bootstrap.sh: added

	* Makefile.am: added

2003-03-25  William A. Perkins  <william.perkins@pnl.gov>

	* plot_netcdf.f90 (plot_file_setup_netcdf):  accum_initialize was
	called here

	* plot_output.f90 (plot_file_setup): accum_initialize needed to be
	called here 

	* makefile.dec: changes to plot output incorporated, but it does
	not work.  CGNS is compiled with -fno-second-underscore. I would
	have to compile NetCDF similarly and add the "-assume
	no2underscores" option.  Later.

	* makefile: incorporate changes to plot output 

	* plot_output.f90: CGNS output default

2003-03-19  William A. Perkins  <william.perkins@pnl.gov>

	* mass2_main_025.f90: repair small depth warning/error messages
	for when wetting and drying is off

2003-03-18  William A. Perkins  <william.perkins@pnl.gov>

	* makefile.intel: incorporate changes to plot output 

	* makefile.linux: incorporate changes to plot output

	* plot_output.f90: incorporate changes to NetCDF and CGNS output

	* plot_netcdf.f90: seperate out NetCDF stuff from plot_output.

	* plot_cgns.f90: created

2003-03-11  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/partition/scalar_source.base: added missing quote

	* test/benchmark/mcn-test/results.txt: some tests with the intel
	compiler. 

	* mass2_main_025.f90: rearrange computation of transport equation
	coefficients 

	* makefile.intel: do not worry about module files -- all
	dependencies are on object files

	* README: added instructions for NetCDF

2003-01-31  William A. Perkins  <william.perkins@pnl.gov>

	* makefile.lahey: created

	* makefile.intel: created

	* makefile.linux: include a way to compile for condor standard
	universe 

2003-01-28  William A. Perkins  <william.perkins@pnl.gov>

	* date_time_module.f90: do not assume the length of date_string
	and time_string when passed in

2003-01-13  William A. Perkins  <william.perkins@pnl.gov>

	* misc_vars_module.f90: There were LOTS of global variables here
	that either are not being used or should not be global
	variables. Got rid of (some of) them.

	* makefile.linux: solver module depends on the utility module

	* hydro_solve.f90: block connections in the depth correction
	solution are made using the *underrelaxed* dp from the connecting
	block 

2003-01-10  William A. Perkins  <william.perkins@pnl.gov>

	* plot_output.f90: use do_rptdead to output 'isdead' in plot
	output 

	* block_bc_module.f90: set do_rptdead when DEAD BC's are read

	* misc_vars_module.f90: add do_rptdead flag

	* test/flow/dead-quickon/dead.lay: plot.nc path was wrong

	* scalars_module.f90: add SCALBC_BLOCK for block boundary
	conditions (for use later)

	* global_module_023.f90: add FLOWBC_BLOCK for block boundary
	conditions (for use later)

2003-01-08  William A. Perkins  <william.perkins@pnl.gov>

	* test/benchmark/mcn-test/mass2_v027.base: dump gage output every
	time step

	* gage_output_module.f90: Modified mass source output to include
	the number of hydro iterations performed (used for comparisons
	with other solvers)

	* mass2_main_025.f90: Fixed bug in apply_scalar_bc that caused
	output of scalars to be messed up.  Changed scalar iteration
	counter name so it did not use the hydro iteration counter.

2003-01-06  William A. Perkins  <william.perkins@pnl.gov>

	* gage_output_module.f90: put the number of hydro iterations in
	the mass source output file

2002-12-12  William A. Perkins  <william.perkins@pnl.gov>

	* test/Makefile (SUBDIRS): include wave cases

	* test/wave/Makefile: added

	* test/wave/falconer/plot-one.gp: added to animate profile plots

	* test/wave/falconer/profile-anim.sh: added to animate profile plots

	* solver_sixpack.f90: added

	* makefile.linux: added sixpack solver module

	* mass2.f90: blocks now allocated in main program

	* misc_vars_module.f90: ivec/jvec no longer used, read_grid no
	longer used

2002-12-11  William A. Perkins  <william.perkins@pnl.gov>

	* makefile: brought up to date with makefile.linux and tested 

	* makefile.dec: brought up to date with makefile.linux and tested 

	* solver_aztec.f90: set solver options, remove debugging write
	statements 

	* solver_tdma.f90: check to make sure the indices of dd are not
	exceeded 

	* test/flow/Makefile: add dead-1-blk and dead-2-blk back to subdir
	list 

	* test/flow/dead-1-blk/Makefile: plot.eps depends on dead.lay

	* test/flow/dead-2-blk: New multi-block test case like dead-2

	* test/flow/normal-2blk/plot-vel.gp: plot the last time step
	rather than the second

	* test/flow/normal-2blk/plot-elev.gp: plot the last time step
	rather than the second

	* test/flow/normal-2blk/plot-depth.gp: plot the last time step
	rather than the second

	* test/flow/normal-2blk/mass2_v027.cfg: print every time step

	* test/flow/wall-1-blk/bcspecs.dat: complete description of BC on
	downstream block

	* test/src-sink/seepdry/Makefile: plot.nc depends on $(MODEL)

	* test/src-sink/normal/Makefile: plot.nc depends on $(MODEL)

2002-11-15  William A. Perkins  <william.perkins@pnl.gov>

	* test/flow/normal-1blk/Makefile: Added cases for upstream stage. 

	* scalars_module.f90: Add SCALBC_BLOCK boundary condition type.

	* mass2_main_025.f90: Explicitly assign BC's at block to block
	boundaries.  Verify other BC applications.

	* makefile.linux: Add solver_test object file targets.

	* makefile.dec:  Add solver_test object file targets. Add aztec
	solver. 

	* hydro_solve.f90: deal with cells of type CELL_BLOCKBND_TYPE.
	BC's have to be explicitly applied for these cells; they were
	assumed with the old TDMA solver.

	* global_module_023.f90: added new cell type: CELL_BLOCKBND_TYPE 

2002-10-31  William A. Perkins  <william.perkins@pnl.gov>

	* test/transport/mixing-transport-only: Duplicate of the mixing
	test case using transport-only mode

2002-10-23  William A. Perkins  <wa_perkins@pnl.gov>

	* utility.f90: created

	* mass2_main_025.f90: encapsulated cell equation assembly by
	equation, and isolated solver code in new module

	* solver_tdma.f90: created

	* hydro_solve.f90: created

	* mass2.f90: moved some of startup into the main program: open log
	files and read configuration

	* global_module_023.f90: 1. made constants PARAMETERs, 2. moved
	the lud lvd components of coeff_struct to block_struct, 3. did
	away with coeff_struct

2002-08-16  William A. Perkins  <wa_perkins@pnl.gov>

	* scripts/mass2gage.pl: Added -X option to skip initial time
	slices, and added -D option to skip those times when the gage
	location is dry


2002-08-15  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: made negative depths a only a warning when
	wetting and drying is in effect, negative depths are set to the
	dry_zero_depth. 

	* misc_vars_module.f90: Add do_flow_diag.

	* plot_output.f90: Group some of the less used hydrodynamic output 
	variables and print them only if the "do_flow_diag" flag is on

2002-04-02  William A. Perkins  <wa_perkins@pnl.gov>

	* test/flow/normal-trap-1blk/bcspecs.dat: flow is now assigned
	across the entire upstream boundary

	* mass2_main_025.f90 (compute_uflow_area): added this routine to
	compute boundary flow area.  For FLUX hydro BC's, velocities are
	now computed using the flow area computed by this routine, rather
	than just dividing the flow evenly amongst the cells

2002-03-18  William A. Perkins  <wa_perkins@pnl.gov>

	* global_module_023.f90 (allocate_block_components): all block
	array allocations use i/j_index_min and i/j_index_extra

	* misc_vars_module.f90: added i/j_index_min and i/j_index_extra
	parameters which (will eventually) define the lower array limit
	and the padding on the upper limit.

	* mass2_main_025.f90 (shallow_v_nudge): This routine is supposed
	to help when depths become shallow, and is based on hints from
	Ussellio-Polatera and Sauvaget (1988).  It does not seem to make
	much difference, which means it does not hurt either.  It probably
	needs to be removed, or possibly used to replace the source term
	rather than supplement it. More work later.

	* tecplot/mass2ld/vc4/mass2ld.mdp: updated to tecplot version 9.0

	* scripts/mass2gage.pl: add -E option to spit out elapsed
	simulation time rather than dates 

2002-03-11  William A. Perkins  <wa_perkins@pnl.gov>

	* date_time_module.f90: lenthened the time_string of the
	datetime_struct and allowed the *reading* of dates like
	"01-01-2000 04:00:02.34"

2002-03-04  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (linear_friction): As a temporarily permanent
	hack, do not allow depths to go below the dry_depth when doing
	wet/drying.  This was causing a problem near a block boundary,
	although it could be imagined to happen elsewhere.  What really
	needs to happen is to have u and v cells (p cell edges) go dry
	independantly of the p cells.

2002-02-28  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: Corrected a problem with dry or dead cells
	at the upstream end of a block, when there is a connecting block:
	switch the ds BC in the us block to zero velocity instead of
	elevation. 

2002-02-27  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (hydro): some minor rearrangement of boundary
	condition application code

	* mass2_main_025.f90 (wselev_block_neighbor): routine to peek into
	the neighboring cell of a connected block and get w.s. and bottom
	elevation. 

	* misc_vars_module.f90: Added con_i for BC application

2002-02-21  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/mixing: Added some non-mixing cases using a zero
	diffusivity and a wall

2002-02-19  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: (transport_precalc): diffussity set to zero
	in dead cells.

2002-02-13  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (transport): use the hybrid scheme instead of
	the power law scheme to allow for zero diffusivity.

2002-02-05  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (transport_precalc): use a harmonic mean for
	the diffusivity rather than the arithmatic mean

	* test/transport/pointsource/Makefile: created

	* test/transport/mixing/Makefile: created

2002-01-30  William A. Perkins  <wa_perkins@pnl.gov>

	* block_bc_module.f90 (read_bcspecs): added language for
	water mass source/sink time series

	* global_module_023.f90: added xsource to the block structure

	* test/Makefile: Began to put Makefiles in each of the test
	cases.  Only in some of test/flow for now.

	* mass2_main_025.f90 (linear_friction): collected the friction
	term calculations into a single subroutine

2002-01-29  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: implemented linearization of bed shear
	source term in momentum equations using Taylor series expansion.

2002-01-28  William A. Perkins  <wa_perkins@pnl.gov>

	* test/flow/wetdry1/mass2_v027_{warmup,case1,case2,case2}.cfg:
	reduced the maximum mass source error, fixed the wet/dry line 

	* test/flow/wetdry1/runit.sh: Save mass_source output in each case

	* test/flow/normal-trap-1blk:  Added simple trapezoidal test

	* mass2_main_025.f90: deal with array edges, mostly for output:
	keep edge depths positive and extend the isdry flag out to the
	edges. 

2002-01-22  William A. Perkins  <wa_perkins@pnl.gov>

	* test/flow/wetdry1-blk: Added this test: just like wetdry1 but
	with two blocks.

	* test: Updated all of the configuration files in the test cases.

	* plot_output.f90: computation of courant and froude numbers only
	at positive depths, added output of isdry block variable when
	wet/drying enbled

	* misc_vars_module.f90: added global wet/drying parameters

	* gage_output_module.f90: added output of the isdry cell variable
	if wetting and drying is enabled.

	* global_module_023.f90: added isdry variable to block structure

	* julian.f90: changed a REAL conversion of an integer to a DBLE
	conversion

2002-01-11  William A. Perkins  <wa_perkins@pnl.gov>

	* test/flow: Added the following tests of internal boundary
	conditions: wall-1, wall-2, dead-1, dead-2, and dead-quickon.
	Added some equivalent tests using multiple blocks: dead-1-blk, and
	wall-1-blk.  Also put the SGI runtime environment variables in
	each of the runit.sh files.

	* mass2_main_025.f90: Fixed the writing of 'gridplot.dat' so the
	lines would not be so long.  Tecplot was choking on long lines.

2002-01-09  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: Use WALL and DEAD internal boundaries

	* block_bc_module.f90: Read WALL and DEAD internal boundaries

	* global_module_023.f90: added "isdead" structure to block data

	* makefile.linux: changed default flags to -B108 -YEXT_NAMES=LCS
	-YCFRL=1 which allows linking with g77 objects/libraries

2001-11-29  William A. Perkins  <wa_perkins@pnl.gov>

	* Merged SAC branch.

2001-07-27  William A. Perkins  <wa_perkins@pnl.gov>

	* plot_output.f90: placed a lower limit on the absolute value of
	data in plot output

2001-07-18  William A. Perkins  <wa_perkins@pnl.gov>

	* scalars_source.f90: sediment_source_timestep is no longer
	necessary

	* bed.f90: deposition and erosion are recomputed here using the
	final concentration for the timestep; the values computed here are
	saved for output

	* sediment_source.f90: deposition and erosion are now computed in
	sediment_source_term using the current concentration, rather than
	being computed before the timestep.  sediment_source_timestep is no
	longer necessary

	* test/sediment/test1/plot-mass.gp: added

	* test/sediment/test1/runit.sh: add mass plot

	* particulate_source.f90: partioning between dissolved and
	particulate now uses the last iteration instead of being computed
	at the beginning of the time step.

2001-07-17  William A. Perkins  <wa_perkins@pnl.gov>

	* bed_functions.f90 : VF for Windows had trouble with USE
	scalars_source, ONLY -- took out the ONLY

	* total_conc.f90: Added (a long time ago).

	* makefile.sun: Dynamic linking to the C library no longer
	necessary. 

	* makefile.linux: Added checking of INEXACT floating point
	errors. 

	* bed_source.f90: When reading bed source time series, store the
	mass in a temporary REAL value before placing it in the time
	series array.  This was a failed attempt to fix some apparent
	precision problems when reading a bed source file. 

2001-04-12  William A. Perkins  <wa_perkins@pnl.gov>

	* biota.f90: Eslingers new code incorporated.

2001-02-27  William A. Perkins  <wa_perkins@pnl.gov>

	* scalars_source.f90: part_param%bedkd was not converted as was
	part_param%kd

2001-02-12  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile.sun: Added

	* accumulator.f90: Removed a FORALL loop - the Sun F90 compiler
	does not understand them

2000-12-19  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/pointsource/stuff-map-1.dat: modified for correct
	indexing scheme

	* test/transport/multi-bedsource/morestuff-map-1.dat: modified for
	correct indexing scheme

	* test/transport/multi-bedsource/stuff-map-1.dat: modified for
	correct indexing scheme

	* test/sediment/bedsource/stuff-map-1.dat: modified for correct
	indexing scheme

	* test/transport/bedsource/stuff-map-1.dat: modified for correct
	indexing scheme

	* test/benchmark/mcn-test/mass2_v027.base (and others): include
	flag for reading initial bed from a file. 

	* scripts/mass2dump.pl: added 

2000-12-07  William A. Perkins  <wa_perkins@pnl.gov>

	* bed.f90: bed_read_init added to read initial bed from
	"initial_bed.dat". 

	* mass2_main_025.f90: read the read_bed_init flag.

2000-12-04  William A. Perkins  <wa_perkins@pnl.gov>

	* accumulator.f90: use do_flow_output flag

	* bed_source.f90: Indices used to read source map were
	corrected 

	* biota_source.f90: comments added only

	* makefile.linux: make the lowercase externals compiler flag the
	default. 

	* plot_output.f90: make use of the do_flow_output flag  

	* sediment_source.f90: erodibility can now be 0.0 

	* misc_vars_module.f90: added do_flow_output flag

2000-09-08  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: Changes to add bed, most important are to
	the configuration file input and to hotstart output.

	* bed_functions.f90: added

	* bed.f90: added

	* gage_output_module.f90: bed output

	* particulate_source.f90: added bed exchange and particulate count

	* plot_output.f90: Simplified some of the file creation routine
	and added bed variable output

	* sediment_source.f90: add particle density (DENSITY) parameter 

	* scalars_source.f90: count particulate species for the bed

2000-09-05  William A. Perkins  <wa_perkins@pnl.gov>

	* sediment_source.f90: allow only erosion or deposition, not both

	* TODO: changes to sediment_source_rec 

	* gage_output_module.f90: changes to sediment_source_rec 

	* plot_output.f90: changes to sediment_source_rec 

	* particulate_source.f90: changes to sediment_source_rec 

	* sediment_source.f90: added pdens to sediment_source_rec, moved
	the "sediment_block" structure into sediment_source_rec

2000-08-28  William A. Perkins  <wa_perkins@pnl.gov>

	* block_bc_module.f90: the bc_spec part of scalar_bc_struct needed
	to be increased from 100 to 200

2000-08-23  William A. Perkins  <wa_perkins@pnl.gov>

	* global_module_023.f90: added "bedshear" to block

	* plot_output.f90: modifications to output "shear" at the same
	points as velocity

	* gage_output_module.f90: don't try to write to the NetCDF gage
	output if there are zero gage locations (should have done this
	long ago

2000-08-22  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (bedshear): function to compute bedshear at
	each (velocity) point

	* test/biota/simple: added test case for biota module and
	interface  

2000-08-18  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: use oldconc instead of conc for
	scalar_source_term 

2000-08-17  William A. Perkins  <wa_perkins@pnl.gov>

	* biota_source.f90: added

	* test/transport/1d-advection-1blk/runit.sh: mass2_v025 -> mass2_v026

	* test/flow/slopebreak-2/runit.sh: mass2_v025 -> mass2_v026

	* test/flow/slopebreak-1/runit.sh: mass2_v025 -> mass2_v026

	* test/flow/normal-2blk/runit.sh: mass2_v025 -> mass2_v026

	* test/flow/normal-1blk/runit.sh: mass2_v025 -> mass2_v026

	* bed_source.f90: Oops, should have used rec%data(its)%n instead
	of rec%nts

	* test/flow/jump: added plot of courant number, changed mass2_v025
	to mass2_v026

2000-08-10  William A. Perkins  <wa_perkins@pnl.gov>

	* biota.f90: added

	* bed_source.f90: allow (but warn about) bed cumulative mass time
	series that do not completely include the simulation period.  The
	mass curve is assumed flat outside the simulation period.

2000-08-08  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/bedsource/conc.dat: converted to units per liter 

	* test/transport/bedsource/scalar_source.base: added conversion
	factor so that concentration is specified in units per liter
	rather than units per cubic foot

	* scripts/mass2flux.pl (VarConversion): recognize, and correctly,
	scalar variables with the "Conversion" attribute

	* plot_output.f90: add "Conversion" attribute in NetCDF
	output for generic scalar species

	* gage_output_module.f90: add "Conversion" attribute in NetCDF
	output for generic scalar species

	* generic_source.f90: add "CONVERT" option keyword for generic
	scalar species to specify conversion factor to per cubic feet

2000-08-07  William A. Perkins  <wa_perkins@pnl.gov>

	* scripts/mass2flux.pl: new script to compute flow/flux from plot
	output file 

2000-08-04  William A. Perkins  <wa_perkins@pnl.gov>

	* scripts/mass2slice.pl: changed variable output format from %12.3f
	to %12.5g

2000-08-02  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/1d-analytic-2blk: Converted the scalar type from
	"TEMP" to "GEN"

2000-08-01  William A. Perkins  <wa_perkins@pnl.gov>

	* scalars_source.f90: Absoft does not have NULL()? -- Commented
	calls out -- we don't need to initialize if we're careful, right? 

	* makefile.linux: catch up to makefile.dec

	* test/flow/jump: flow test created -- supercritical flow with
	hydraulic jump.  It's kind of touchy but it works

	* test/transport/mixing: changed the transported species from
	temperature to a generic species named "stuff"

	* test/transport/decay: created

2000-07-26  William A. Perkins  <wa_perkins@pnl.gov>

	* test/benchmark/mcn-test: converted to new scalar scheme

	* test/transport/1d-analytic-2blk: converted to new scalar scheme
	(simulated as temperature)

	* test/transport/1d-analytic-1blk: converted to new scalar scheme
	(simulated as temperature)

	* test/transport/mixing: converted to new scalar scheme
	(simulated as temperature)

	* test/transport/1d-advection-1blk: converted to new scalar scheme
	(simulated as temperature)

2000-07-19  William A. Perkins  <wa_perkins@pnl.gov>

	* scripts/mass2slice.pl: added the -l option to extract only the
	last time slice

2000-07-13  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90 (start_up): initialized baro_press to 760 in
	case no weather is read.  (Should have done this years ago.)

2000-07-11  William A. Perkins  <wa_perkins@pnl.gov>

	* transport_only_module.f90 (hydro_restart_read): forward plane
	error message printed the wrong plane number.

	* makefile.linux (misc_vars_module.o): rule missing

	* makefile: changes to add transport only modules

	* mass2_main_025.f90: Fixed problem with hotstart output -- needed
	to check *absolute* values against 'tiny'

2000-07-10  William A. Perkins  <wa_perkins@pnl.gov>

	* test/benchmark/mcn-test: created

2000-07-07  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/1d-analytic-2blk: created

	* test/transport/1d-analytic-1blk: created

2000-07-06  William A. Perkins  <wa_perkins@pnl.gov>

	* test/transport/1d-advection-1blk: added "pure advection" (like
	  MASS1's) test case 

	* test/transport/mixing: added lateral mixing test case compared
	with analytic solution.

	* util/cart_grid/makefile.linux: created

	* util/cart_grid/makefile.dec: created

	* util/cart_grid/cartgrid.f90: x, y, zbot assigned before
	allocation? 
	Added code to ask for x and y spacing.

2000-04-06  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90: converted elapsed to REAL before putting
	to gage file.

2000-04-04  William A. Perkins  <wa_perkins@pnl.gov>

	* tecplot/env.csh: Changed TEC75HOME to	TEC80HOME 

	* tecplot/mass2ld/Makefile (GUILIB): Changed TEC75HOME to
	TEC80HOME

	* scripts/mass2gage.pl (Message): Gage data can be extracted as a
	cumulative frequency distribution.

2000-02-18  William A. Perkins  <wa_perkins@pnl.gov>

	* scripts/mass2gage.pl: needed to decrement the gage id

2000-02-04  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: 
	* met_data_module.f90: 
	* block_bc_module.f90: 
	* table_bc_module.f90: 
	* global_module_023.f90: 
	* gage_output_module.f90: 
	* scalars_module.f90: EXIT() reqires argument for Lahey compiler 

1999-11-17  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: added Marshall's code for handling
	  downstream velocity boundary conditions
	  The call to gage_print required a "cast" to double precision for
	  the "elapsed" arguement 

1999-10-20  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile.linux (FLAGS): needed to generate lower case symbol
		  names in order to link to NetCDF

1999-09-09  William A. Perkins  <wa_perkins@pnl.gov>

	* tecplot/env.csh: check to see if TEC75HOME is set before we set
	  it

	* makefile.dec (MODULES): plot_output.mod was added

1999-08-29  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90 (gage_print_netcdf): All output needed to
	  be assigned to a REAL temporary variable before writing to the
	  file 

1999-08-24  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90: changed the output type for all NetCDF
	  variables (except time) from double to real

	* plot_output.f90: changed the output type for all NetCDF
	  variables (except time) from double to real

1999-08-16  William A. Perkins  <wa_perkins@pnl.gov>

	* plot_output.f90 (diag_plot_print): added -- this does the froude
	  and courant number calculations.

1999-08-11  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: output to gridplot-metrics.dat is not made
		  if plot_do_tecplot is true

	* plot_output.f90 (plot_file_setup_netcdf): added grid metrics
		  hp1, hp2, gp12 to plot output file
	  plot_do_netcdf and plot_do_tecplot are now PUBLIC

	* scripts/mass2tecplot.pl: created

	* plot_output.f90: added longitudinal and lateral velocity to the
		  plot output file

	* gage_output_module.f90 (gage_make_ident): added
	  (gage_read_control): modified to optionally read an identifier
		  after block, i, j
	  (gage_file_setup_netcdf): output gage names from the identifier 

1999-08-10  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile.dec (gage_output_module.o): depends on globals.$(MOD)
	  now
	  (netcdferror.o): added as target and to object list

1999-08-08  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90 (gage_file_close): added

1999-08-04  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90 (gage_print_netcdf): added
	  (gage_file_setup): modified to use gage_print_netcdf

	* mass2_main_025.f90: passed do_transport to gage_file_setup

1999-08-03  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: most output to "output.out" is now only made
	  if the debug flag is set -- exceptions are the initial
	  simulation information and mass source information

	* makefile.dec (mass2_main_025.o): as with makefile
	(plot_output.$(MOD)): depends on plot_output.o not print_output.o 

	* makefile (mass2_main_025.o): was still mass2_main_024.o --
		  changed to 025.

1999-08-03  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile (mass2_main_025.o): 024 ->> 025
	(PLOT_OUTPUT.$(MOD)): depends on plot_output.o not print_output.o

1999-08-02  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90(read_bc_tables): skip first line of BC files 
	  (read_scalar_bc_tables): skip first line of BC files 

1999-07-28  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90: had to increase the size of table_entry
	  again to 40000 and reduce max_cell_values to 10 (was 1000 by
	  mistake) 

1999-07-27  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90: increased the size of table_entry in
	  table_bc_struct to 10000

1999-06-02  William A. Perkins  <wa_perkins@pnl.gov>

	* gage_output_module.f90 (gage_file_setup_netcdf): added

	* plot_output.f90: moved netcdferror to its own file

	* makefile (netcdferror.o): added rule

	* netcdferror.f90: created

	* gage_output_module.f90 (mass_file_setup): added
	  (mass_print): added
	  (mass_file_close): added

	* mass2_main_025.f90: moved the mass source output to
	  gage_output_module.f90  

	* gage_output_module.f90 (gage_print): added

	* mass2_main_025.f90: moved the gage output to gage_output_module.f90

	* gage_output_module.f90 (gage_read_control): added routine

	* plot_output.f90 (plot_file_setup_netcdf): added
	  (plot_print_netcdf): added
	  (netcdferror): added but may be moved
	  (plot_zone_name): added
	  (plot_fix_velocity): added

	* makefile (NETCDFDIR): added various macros to allow inclusion of
	  NetCDF library 

1999-08-03  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: most output to "output.out" is now only made
	  if the debug flag is set -- exceptions are the initial
	  simulation information and mass source information

	* makefile.dec (mass2_main_025.o): as with makefile
	(plot_output.$(MOD)): depends on plot_output.o not print_output.o 

	* makefile (mass2_main_025.o): was still mass2_main_024.o --
		  changed to 025.

1999-08-02  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90(read_bc_tables): skip first line of BC files 
	  (read_scalar_bc_tables): skip first line of BC files 

1999-07-28  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90: had to increase the size of table_entry
	  again to 40000 and reduce max_cell_values to 10 (was 1000 by
	  mistake) 

1999-07-27  William A. Perkins  <wa_perkins@pnl.gov>

	* table_bc_module.f90: increased the size of table_entry in
	  table_bc_struct to 10000

1999-05-26  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_v025.mak: regenerated

	* mass2_v025.dsp:  added plot_output module -- seems to work

	* makefile.dec (plot_output.o): added

	* makefile (MODULES): added PLOT_OUTPUT to module list

1999-05-21  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: moved all of the diagnostic_plot.dat output to
	  plot_output.f90

	* plot_output.f90: moved all of the diagnostic_plot.dat output from
	  mass2_main_025.f90

	* mass2_main_025.f90: moved all of the plot.dat output to
	  plot_output.f90  

	* plot_output.f90: created, encapsulates plot file output.

1999-05-11  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: The output to mass_source_iounit had lines
	  too long, the output was spread over multiple lines

1999-04-08  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile (DEBUG): removed -g3 and added -Ofast, as per
	  Marshall's tests

	* makefile.dec: Lower cased all module names
	(FLAGS): used -fpe1, but this may not be the right choice 
	(DEBUG): removed -g3 and added -fast, needs to be benchmarked

1999-04-05  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile.dec: created

1999-03-22  William A. Perkins  <wa_perkins@pnl.gov>

	* makefile (tags): added tags target

Thu Dec 17 20:16:07 1998  William A. Perkins  <wa_perkins@pnl.gov>

	* mass2_main_025.f90: Initialize scalar arrays with 'conc_initial'
		  if hotstart file does not have transport values.

