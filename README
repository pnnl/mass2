-*- text -*--------------------------------------------------
file: README
General info and compilation instructions for MASS2
-------------------------------------------------------------
-------------------------------------------------------------
Battelle Memorial Institute
Pacific Northwest Laboratory
-------------------------------------------------------------
-------------------------------------------------------------
Created November 17, 1999 by William A. Perkins
Last Change: Tue Mar 11 07:07:29 2003 by William A. Perkins <perk@leechong.pnl.gov>
-------------------------------------------------------------

-------------------------------------------------------------
NetCDF
-------------------------------------------------------------

MASS2 requires version 3.4 of the NetCDF library.  Some initial tests
with the 3.5 version were veerrry slow, so the older version must be
used. 

On Intel Linux, one has to be careful how NetCDF is compiled.  With
the original 3.4 distribution, there is really only one way to go.
First, compile and install NetCDF with g77.  Then, use the Absoft
compiler with these flags:

    -B108 -YEXT_NAMES=LCS -YCFRL=1

If you want to use another compiler, then NetCDF must be compiled
differently.  Unpack the 3.4 distribution and replace 
src/fortran/cfortran.h with the cfortran.h from the 3.5
distribution. Configure and compile NetCDF specifying the following 

    FC=g77
    FFLAGS=-fno-second-underscore
    CPPFLAGS=-DNDEBUG -DpgiFortran

When the NetCDF library is built this way, it can be linked using any
of the available compilers.  The Absoft compiler flags need to be
changed to

    -YEXT_SFX=_ -YEXT_NAMES=LCS -YCFRL=1

-------------------------------------------------------------
compilation
-------------------------------------------------------------

By default all of the makefiles will produce an executable called
`mass2_v027'.  This can be changed by setting the `TARGET' macro on
the command line.  Some suggested `TARGET's are shown below (using the
condor codes for OpSys and Arch). Currently the following platforms
are supported

    IRIX:   

        make -f makefile [DEBUG=-g [-O]] [TARGET=mass2.IRIX65.SGI]

    DEC OSF/1:      

        make -f makefile.dec F90=f95 [DEBUG=-g [-O]] [TARGET=mass2_v025.dec]

        Compile on tophet.  Can run on both OSF/1 and Linux alpha.

    Linux i386:     

        make -f makefile.linux [DEBUG=-g] [TARGET=mass2.LINUX.INTEL]

        This is for the Absoft Pro Fortran 90/95 compiler, currently
        version 7.5. 

        make -f makefile.intel [DEBUG=-g] [TARGET=mass2.LINUX.INTEL]

        This is for the Intel Fortran 90 compiler, version 6.0.1. 

        make -f makefile.lahey [DEBUG=-g] [TARGET=mass2.LINUX.INTEL]

        This is for the Lahey Fortran 95 compiler, version 6.10a

    Linux alpha:    

        make -f makefile.dec [DEBUG=-g [-O]] [TARGET=mass2.LINUX.ALPHA]

        This uses the DEC Fortran 90 compiler for Linux.  This is
        installed only on gehenna. 

    Sun Solaris SPARC:

        make -f makefile.sun [DEBUG=-g] [TARGET=mass2.SOLARIS27.SUN4u]

        This is for the Sun Fortran 90 compiler.  This can be found on
        artemis. 

    Windows:        

        nmake /f mass2_v025.mak  "CFG=mass2_v025 - Win32 Release"
        nmake /f mass2_v025.mak  "CFG=mass2_v025 - Win32 Debug"

        Compile on r101243.